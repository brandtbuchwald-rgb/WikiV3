<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EHT Companion Hub</title>

  <!-- Docsify Themeable CSS (provides layout + baseline styles for the sidebar) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">

  <style>
    /* ---------- Design tokens ---------- */
:root{
  --accent: #6ee7ff;        /* primary accent */
  --accent-2: #8b7cff;      /* secondary accent for blends */
  --brand-ink: #cfe1ff;

  --bg-light: #ffffff;
  --ink-light: #1f2937;
  --link-light: #1565c0;

  --bg-dark: #0a1220;
  --ink-dark: #e5e7eb;
  --muted-dark: #9ca3af;

  --sidebar-dark: #0c1626;
  --sidebar-border: rgba(255,255,255,.08);

  --card-light: rgba(255,255,255,.82);
  --card-dark: rgba(16,26,40,.78);

  --radius: 14px;
  --shadow-1: 0 10px 30px rgba(0,0,0,.18);
  --shadow-2: 0 24px 60px rgba(0,0,0,.28);
}

/* ---------- Page & global ---------- */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, "Apple Color Emoji",
               "Segoe UI Emoji";
  line-height:1.6;
  color: var(--ink-light);
  background:
    radial-gradient(1200px 600px at -15% -20%, #aef0ff26, transparent 60%),
    radial-gradient(800px 500px at 110% 20%, #c1b5ff1f, transparent 55%),
    linear-gradient(180deg, #f8fbff, #f3f7ff 40%, #eef2ff);
  transition: background .25s ease, color .25s ease;
}
a{
  color: var(--link-light);
  text-decoration: none;
  background-image: linear-gradient( to right, var(--accent), var(--accent-2) );
  background-size: 0% 2px;
  background-position: 0 100%;
  background-repeat: no-repeat;
  transition: background-size .25s ease, color .2s ease;
}
a:hover{ background-size: 100% 2px; }

/* ---------- Content card ---------- */
.content{ max-width: 920px; padding: 32px 28px 120px; }
.markdown-section{
  background: var(--card-light);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(0,0,0,.05);
  border-radius: var(--radius);
  padding: 32px;
  box-shadow: var(--shadow-1);
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.markdown-section:hover{
  transform: translateY(-2px);
  box-shadow: var(--shadow-2);
  border-color: rgba(0,0,0,.08);
}

/* ---------- Headings (gradient ink) ---------- */
.markdown-section h1,
.markdown-section h2{
  font-weight: 800;
  letter-spacing: .2px;
  line-height: 1.2;
  margin-top: .2em;
  margin-bottom: .4em;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.markdown-section h3{ font-weight: 700; }

/* ---------- Lists, tables, code ---------- */
.markdown-section ul>li::marker{ color: var(--accent); }
.markdown-section table{
  width:100%; border-collapse: collapse; overflow: hidden;
  border-radius: 10px; box-shadow: var(--shadow-1);
}
.markdown-section th, .markdown-section td{
  padding: 10px 12px; border-bottom: 1px solid rgba(0,0,0,.08);
}
.markdown-section th{
  background: linear-gradient(180deg, #f7fbff, #eef6ff);
  text-align:left;
}
.markdown-section code{
  background: rgba(0,0,0,.06);
  padding: .12em .4em; border-radius: 6px;
}

/* ---------- Sidebar polish ---------- */
.sidebar{
  background:
    radial-gradient(1000px 500px at -160px -120px, #69d7ff22, transparent 60%),
    linear-gradient(180deg, #0f1b2a 0%, #0b1420 100%);
  border-right: 1px solid var(--sidebar-border);
}
.sidebar .app-name{
  position: relative;
  padding: 20px 18px 14px;
  border-bottom: 1px solid var(--sidebar-border);
  background: linear-gradient(180deg, rgba(255,255,255,.04), transparent);
}
.sidebar .app-name a{
  color: var(--brand-ink);
  font-weight: 800; letter-spacing:.3px;
  text-shadow: 0 2px 18px rgba(110,231,255,.16);
}
.search{ padding: 12px 16px; border-bottom:1px solid var(--sidebar-border); }
input[type="search"]{
  border-radius: 12px !important;
  border: 1px solid rgba(255,255,255,.12) !important;
  background: rgba(255,255,255,.06) !important;
  color: #dbe7ff !important;
  padding: 10px 12px !important;
}
.sidebar-nav{ padding: 16px 10px 28px; }
.sidebar-nav a{
  color:#cfd8dc; border-radius: 10px; padding: 9px 12px; display:block;
  transition: background .18s ease, box-shadow .18s ease, transform .06s ease;
}
.sidebar-nav a:hover{
  background: rgba(255,255,255,.07);
  color:#fff; box-shadow: 0 10px 20px rgba(0,0,0,.18);
}
.sidebar-nav li.active > a{
  background: linear-gradient(90deg, rgba(110,231,255,.18), rgba(139,124,255,.18));
  color:#fff;
  box-shadow: inset 0 0 0 1px rgba(110,231,255,.35);
  position: relative;
}
.sidebar-nav li.active > a::before{
  content:"";
  position:absolute; left:-8px; top:8px; bottom:8px; width:3px;
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius: 6px;
}
.sidebar-nav a:hover{
  color:#fff;
  text-shadow:
    0 0 6px rgba(255,216,107,.55),
    0 0 16px rgba(155,125,245,.35);
}
/* caret for collapsibles (Docsify plugin adds .collapser span) */
.sidebar-nav li.collapsible > .collapser{
  float:right; opacity:.8; transform: translateY(2px);
  font-size: 13px; user-select:none; cursor:pointer;
}

/* ---------- Theme toggle (button is moved into app-name by JS) ---------- */
.theme-toggle{
  position:absolute; right:12px; top:10px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.10);
  color:#fff; border-radius: 999px;
  padding:6px 10px; font-size:15px; line-height:1;
  backdrop-filter: blur(4px);
  cursor:pointer; transition: background .2s ease, transform .05s ease;
}
.theme-toggle:hover{ background: rgba(255,255,255,.18); }
.theme-toggle:active{ transform: translateY(1px); }

/* ---------- Dark mode overrides ---------- */
body.dark{
  color: var(--ink-dark);
  background:
    radial-gradient(1400px 700px at -20% -15%, #56c6ff1c, transparent 60%),
    radial-gradient(900px 600px at 115% -10%, #7c6cff1a, transparent 55%),
    linear-gradient(180deg, #0a1220, #0a1422 55%, #0b1625);
}
body.dark a{ color: #a7c4ff; }
body.dark .markdown-section{
  background: var(--card-dark);
  border: 1px solid rgba(255,255,255,.06);
}
body.dark .markdown-section code{ background: rgba(255,255,255,.08); }
body.dark .markdown-section th{
  background: linear-gradient(180deg, #0f1e33, #0d1a2b);
}
::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.18);
  border-radius: 20px; border: 2px solid transparent;
  background-clip: padding-box;
}

/* ---------- Callouts (use > quotes in markdown) ---------- */
.markdown-section blockquote{
  margin: 1rem 0; padding: 12px 16px;
  border-left: 4px solid var(--accent);
  background: rgba(110,231,255,.08);
  border-radius: 8px;
}
body.dark .markdown-section blockquote{
  background: rgba(110,231,255,.10);
}
/* ===== EHT GAME SKIN ===================================== */
/* Palette (tweak to taste) */
:root{
  --eht-bg:        #182629;   /* deep teal */
  --eht-panel:     #1f2f33;   /* panel body */
  --eht-panel-top: #2a3d42;   /* slight bevel */
  --eht-border:    #0d1719;   /* dark inner edge */
  --eht-trim:      #ceb089;   /* bronze-gold */
  --eht-gold:      #e0c58f;
  --eht-purple:    #7c4bb0;   /* shop accent */
  --eht-ink:       #e7efe9;   /* main text */
  --eht-ink-dim:   #b7c5bf;
  --eht-link:      #9bd4ff;   /* cyan link */
  --eht-link-2:    #ffd166;   /* hover gold */
  --eht-shadow:    rgba(0,0,0,.5);
}

/* Optional 8-bit headline font (tiny & readable) */
@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

/* Body */
body{
  background: radial-gradient(1200px 900px at 30% -10%, #213538 0%, var(--eht-bg) 60%);
  color: var(--eht-ink);
  text-rendering: optimizeLegibility;
}

/* App title in sidebar */
.app-name{
  font-family: 'VT323', ui-monospace, monospace;
  letter-spacing: .5px;
  color: var(--eht-gold);
  text-shadow: 0 1px 0 #000;
}

/* ===== Panels (content + sidebar) */
.sidebar{
  background:
    linear-gradient(#2a3d42, #223438) padding-box,
    linear-gradient(180deg, #f1e1c4, #8b6a3d 70%, #3e2c18) border-box;
  border: 2px solid transparent;
  box-shadow:
    inset 0 1px 0 var(--eht-panel-top),
    0 10px 24px -8px var(--eht-shadow);
}

.markdown-section{
  background:
    linear-gradient(#2a3d42, #1b2b2e) padding-box,
    linear-gradient(180deg, #f1e1c4, #8b6a3d 70%, #3e2c18) border-box;
  border: 2px solid transparent;
  border-radius: 8px;
  padding: 18px 18px 22px;
  box-shadow:
    inset 0 1px 0 var(--eht-panel-top),
    0 10px 26px -8px var(--eht-shadow);
}

/* Headings */
.markdown-section h1,.markdown-section h2{
  font-family: 'VT323', ui-monospace, monospace;
  color: var(--eht-gold);
  border-bottom: 0;
  text-shadow: 0 1px 0 #000;
}
.markdown-section h1{ font-size: 40px; margin-top: 0; }
.markdown-section h2{ font-size: 32px;
  /* ===== EHT UI bits ===== */
:root{
  --eht-gold:#e8cc87;
  --eht-deep:#1b1f27;
  --eht-accent:#9b7df5;   /* subtle purple like in shop */
  --eht-glow:#ffd86b;
}

/* Pixel icons */
.icon {
  width: 18px;
  height: 18px;
  vertical-align: -3px;
  image-rendering: pixelated;
  margin-right: 6px;
}

/* Put a tiny fairybox badge before the site name */
.app-name a{
  position: relative;
  padding-left: 26px;
}
.app-name a::before{
  content:"";
  position:absolute; left:0; top:50%; transform:translateY(-50%);
  width:20px;height:20px; image-rendering:pixelated;
  background:url('assets/icons/Fairybox.png') no-repeat center/contain;
  filter: drop-shadow(0 0 6px rgba(255,216,107,.55));
}

/* Sidebar polish */
.sidebar {
  background: #111a22;                /* dark panel */
  border-right: 1px solid rgba(255,255,255,.06);
}
.sidebar-nav a{
  color:#cfd8dc;
}
.sidebar-nav a:hover{
  color:#fff;
  text-shadow: 0 0 8px rgba(255,216,107,.35);
}

/* Section headers in the sidebar */
.sidebar-nav strong{
  display:block;
  padding:10px 12px 6px;
  color:var(--eht-gold);
  text-shadow:0 0 6px rgba(155,125,245,.35);
  border-bottom:1px solid rgba(255,255,255,.06);
  margin-top:8px;
}

/* Light mode tweaks */
body:not(.dark) .sidebar{ background:#f5f5f5; }
body:not(.dark) .sidebar-nav a{ color:#222; }
body:not(.dark) .sidebar-nav a:hover{ text-shadow:none; color:#1565c0; }
  </style>
</head>

<!-- Start in dark mode; JS will adjust if a saved preference exists -->
<body class="dark">
  <div id="app">Loading EHT Companion Hubâ€¦</div>
  <!-- Toggle is injected into sidebar header after mount -->
  <button id="themeBtn" class="theme-toggle" aria-label="Toggle theme">ðŸŒ™</button>

  <script>
    /* ==================== Docsify config ==================== */
    window.$docsify = {
      name: 'EHT Companion Hub',
      loadSidebar: true,
      subMaxLevel: 2,
      search: 'auto',
      auto2top: true,
      alias: {
        '/README':'/README.md'
      },
      plugins: [
        /* Move theme toggle into the sidebar header & wire up behavior */
        function (hook, vm) {
          const STORAGE_KEY = 'eht-theme';
          const btn = document.getElementById('themeBtn');

          function setTheme(mode){
            document.body.classList.toggle('dark', mode === 'dark');
            btn.textContent = mode === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
            try { localStorage.setItem(STORAGE_KEY, mode); } catch(e){}
          }
          function currentTheme(){
            try { return localStorage.getItem(STORAGE_KEY) || 'dark'; } catch(e){ return 'dark'; }
          }

          // Initial theme from storage
          setTheme(currentTheme());

          btn.addEventListener('click', () => {
            const next = document.body.classList.contains('dark') ? 'light' : 'dark';
            setTheme(next);
          });

          hook.doneEach(function () {
            // Place toggle inside the sidebar title
            const host = document.querySelector('.sidebar .app-name');
            if (host && btn && !host.contains(btn)) {
              host.style.position = 'relative';
              host.appendChild(btn);
            }

            // Build collapsibles (Home stays expanded & non-collapsible)
            const nav = document.querySelector('.sidebar-nav');
            if (!nav) return;

            nav.querySelectorAll(':scope > ul > li').forEach(li => {
              const sub = li.querySelector(':scope > ul');
              const labelLink = li.querySelector(':scope > a');

              const isHome = labelLink && /home/i.test(labelLink.textContent.trim());
              if (!sub || isHome) {
                // Ensure Home looks expanded always
                if (isHome) li.classList.add('active');
                return;
              }

              if (li.classList.contains('collapsible-ready')) return;
              li.classList.add('collapsible','collapsible-ready');

              const caret = document.createElement('span');
              caret.className = 'collapser';
              caret.textContent = 'â–¸';
              labelLink && labelLink.appendChild(caret);

              // default: collapsed
              sub.style.display = 'none';

              labelLink.addEventListener('click', (e) => {
                // expand/collapse group if clicking the group label (not a child link)
                if (e.target === labelLink || e.target === caret) {
                  e.preventDefault();
                  const opened = sub.style.display !== 'none';
                  sub.style.display = opened ? 'none' : '';
                  caret.textContent = opened ? 'â–¸' : 'â–¾';
                }
              });
            });
          });
        }
      ]
    };
  </script>

  <!-- Docsify core + plugins -->
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0"></script>
</body>
</html>
